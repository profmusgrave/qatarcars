<!-- README.md is generated from README.qmd. Please edit that file -->

::: {.content-hidden}

**EXTRA HIDDEN INSTRUCTIONS**

A few important notes about building, maintaining, and deploying this package:

### Documentation

- `README.md` is created with `README.qmd`. After making any changes to `README.qmd`, make sure you run this to generate a new `README.md`:

  ```bash
  quarto render README.qmd --to gfm
  ```

- The package documentation website is built with [{altdoc}](https://altdoc.etiennebacher.com/) and Quarto. I created the skeleton with:

  ```r
  altdoc::setup_docs(tool = "quarto_website")
  ```

  The Quarto configuration files live in `altdoc/`.

- The documentation website can be built locally with:

  ```r
  altdoc::render_docs()
  altdoc::preview_docs()
  ```

  â€¦and it'll appear in `docs/`. *However*, this folder is not tracked by version control. A GitHub action (`.github/workflows/altdoc.yaml`) builds the website with a GitHub runner and deploys it to the `gh-pages` branch, so there's no need to push any website content from here to any remote server.

### Data

The canonical source of data is the Stata file at `inst/extdata/qatarcars.dta`. If this file is ever updated, two things need to happen:

1. Run the script at `data-raw/qatarcars.R` to convert the `.dta` file to the package's internal file type, CSV, and RDS.

2. Run `testthat::snapshot_accept()` to update the test snapshot (`tests/testthat/test-data.R` checks the data against a saved snapshot)

Once that's all done, document, build, and check like normal (see below).

### Build

The normal workflow for updating the package is:

```r
devtools::document()
devtools::check()
devtools::load_all()
```

:::

```{r}
#| label: setup
#| echo: false
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  fig.width = 6,
  fig.height = (6 * 0.618),
  fig.align = "center", 
  fig.retina = 3,
  out.width= "70%",
  dpi = 300
)
```

# qatarcars <img src="man/figures/logo.png" align="right" height="138" alt="" />

<!-- badges: start -->
[![CRAN_Status_Badge](https://www.r-pkg.org/badges/version/qatarcars)](https://cran.r-project.org/package=qatarcars) 
[![R-CMD-check](https://github.com/profmusgrave/qatarcars/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/profmusgrave/qatarcars/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->


## Overview

Qatar Cars provides a more internationally-focused, modern cars-based demonstration dataset. It mirrors many of the columns in `mtcars`, but uses (1) non-US-centric makes and models, (2) 2025 prices, and (3) metric measurements, making it more appropriate for use as an example dataset outside the United States. It includes almost exactly the same variables as the `mtcars` dataset:

- `origin` (the country associated with the car brand)
- `make` (the brand of the car, such as Toyota or Land Rover)
- `model` (the specific type of car, such as Land Cruiser or Defender)
- `length`, `width`, and `height` (all in meters)
- `trunk` capacity (measured in liters)
- fuel `economy` (measured in liters per 100 km)
- `performance` (time in seconds to accelerate from 0 to 100km/h)
- `mass` in kilograms
- `price` in 2025 Qatari riyals
- `type` (the type of the car, such as coupe, sedan, or SUV)
- `enginetype` (electric, hybrid, or petrol)

The original data was compiled by [Paul Musgrave](https://paulmusgrave.info/) in January 2025 and is mostly sourced from YallaMotors Qatar. See [Paul's writeup of the background and purpose of the data](https://open.substack.com/pub/musgrave/p/introducing-the-qatar-cars-dataset).


## Formats

The Qatar Cars data is available in several different formats:

- **This {qatarcars} R package**. See below for complete details. Load like this:

  ```r
  library(qatarcars)
  qatarcars
  ```

- [**Plain text CSV file**](https://github.com/profmusgrave/qatarcars/blob/main/inst/extdata/qatarcars.csv). Use with any software.

- [**Stata .dta file**](https://github.com/profmusgrave/qatarcars/raw/refs/heads/main/inst/extdata/qatarcars.dta). Load like this:

  ```stata
  use "qatarcars.dta"
  list in 1/6
  ```

- [**R .rds file**](https://github.com/profmusgrave/qatarcars/blob/main/inst/extdata/qatarcars.rds). Load like this:

  ```r
  df <- readRDS("qatarcars.rds")
  head(df)
  ```

- [**The QatarCars Python package**](https://github.com/prlitics/qatarcars). Install with `pip install qatarcars`, then load like this:

  ```python
  from qatarcars import get_qatar_cars
  df = get_qatar_cars("pandas")  # or "polars"
  df.head()
  ```


## Installation

The released version of {qatarcars} is available on [CRAN](https://CRAN.R-project.org):

```{.r}
install.packages("qatarcars")
```

You can also install the development version from [GitHub](https://github.com/):

```{.r}
# install.packages("remotes")
remotes::install_github("profmusgrave/qatarcars")
```


## Usage

### Load data

Similar to other data-only R packages like [{gapminder}](https://jennybc.github.io/gapminder/) and [{palmerpenguins}](https://allisonhorst.github.io/palmerpenguins/), load the data by running `library(qatarcars)`:

```{r}
#| label: load-data

library(qatarcars)

qatarcars
```

::: {.callout-tip}
If you have [{tibble}](https://tibble.tidyverse.org/) installed (likely as part of [the tidyverse](https://www.tidyverse.org/)), `qatarcars` will load as a tibble with nicer printing output; if you do not have {tibble} installed, the data will load as a standard data frame.
:::

See `?qatarcars` for data documentation within R.


### Labels

Most columns in `qatarcars` are labeled:

```{r}
#| label: show-attributes

attributes(qatarcars$economy)
```

These labels are visible in RStudio's Viewer panel:

![](man/figures/img/rstudio-viewer-labels.png)

If you use {ggplot2} v4.0+, these variable labels will [automatically appear in plot labels](https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/#labels):

```{r}
#| label: plot-economy-histogram
#| warning: false

library(ggplot2)

ggplot(qatarcars, aes(x = economy)) + 
  geom_histogram(binwidth = 1, fill = "#8A1538", color = "white")
```


## Examples

Fuel efficiency gets worse as cars get heavier:

```{r}
#| label: plot-mass-economy
#| warning: false
#| message: false

ggplot(qatarcars, aes(x = mass, y = economy)) +
  geom_point() +
  geom_smooth(method = "lm") +
  scale_x_continuous(labels = scales::label_comma())
```

Some of these cars are really expensive, so logging the price is helpful:

```{r}
#| label: plot-performance-price
#| message: false

ggplot(qatarcars, aes(x = performance, y = price)) +
  geom_smooth() +
  geom_point(aes(color = type)) +
  scale_y_log10(labels = scales::label_currency(prefix = "QR "))
```


::: {.content-hidden}

---

This readme file was generated on 2025-07-09 by Paul Musgrave. It was modified on 2025-10-03.

# GENERAL INFORMATION

* Title of Dataset: Qatar Cars
## Author
Name: Paul Musgrave
ORCID: https://orcid.org/0000-0002-8984-4992
Institution: Georgetown University Qatar
Address: Education City, Doha, Qatar
Email: rpm47@georgetown.edu

* Date of data collection: January 2025, with additional data collected in July and August 2025.

* Geographic location of data collection: Doha, State of Qatar

* Information about funding sources that supported the collection of the data: No funding 


# SHARING/ACCESS INFORMATION

* Licenses/restrictions placed on the data: Mozilla Public License Version 2.0

* Was data derived from another source?
	* If yes, list source(s): YallaMotor Qatar's listing of vehicles for sale, along with a variety of other Internet sources to piece together "missing" data.

* Recommended citation for this dataset: 

Musgrave, Paul. 2025. "Introducing the Qatar Cars Dataset." July 8. https://musgrave.substack.com/p/introducing-the-qatar-cars-dataset


# DATA & FILE OVERVIEW

## File List: 

* this file
* qatarcars.dta
* qatarcars.csv

* Relationship between files, if important: Identical data, different formats.
* Additional related data collected that was not included in the current data package: NA
* Are there multiple versions of the dataset? NA
	* If yes, name of file(s) that was updated: NA
	* Why was the file updated? NA
	* When was the file updated? NA


# METHODOLOGICAL INFORMATION

## Description of methods used for collection/generation of data: 

The data was collected as part of a statistics course for International Politics majors at Georgetown University. Data was gathered from online automobile Web sites and collected via Google Forms and spreadsheets. Students were assigned automobile manufacturers and told to collect one to three makes for each manufacturer. In addition to collecting much of the data, Musgrave edited the data and ensured consistency in formatting.


# DATA-SPECIFIC INFORMATION FOR QATAR CARS DATASET

* Number of variables: 15
* Number of cases/rows: 99
* Variable List: 

origin          Origin Country Associated with Car (Germany, Italy, Japan, PR China, South Korea, Sweden, UK, USA)

make            Make (30 unique variables; names of brands of automobiles: Audi, BMW, BYD, Bentley, Bestune, Bugatti, Cadillac, Chery, Ford, Geely, Honda, Hyundai, Jaguar, Jetour, Kia, Land Rover, Lexus, Lotus, MG, Maserati, Mazda, McLaren, Mercedes, Mitsubishi, Nissan, Porsche, Tesla, Toyota, Volkswagen, Volvo

model           Model (99 unique models, such as Tiggo 8 Pro Max and Rav4 Hybrid)
length          Length (m)
width           Width (m)
height          Height (m)
seating         Number of Seats
trunk           Trunk Capacity (L)
economy         Fuel Economy (L/100km)
horsepower      Horsepower (hp)
price           Price (QAR)
mass            Mass (kg)
performance     Time 0-100km/h (s)
type            Type (coupe, hatchback, SUV, sedan)
enginetype      Engine Type (Electric, Hybrid, Petrol)


* Missing data codes: Missing data codes: economy is "missing" for electric vehicles (denoted by .), as fuel economy in L/100km is not applicable to electric powertrains.

:::
